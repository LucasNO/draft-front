<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Free Agents</title>

    <link rel="stylesheet" href="../css/bootstrap.min.css">

</head>

<body onload="listFreeAgents();">
    <div class="container">
        <table id="freeAgents" class="table" cellspacing="0" width="100%">
            <thead class="thead-dark">
                <tr>
                    <th data-field="nome">Nome</th>
                    <th data-field="nome">Posição</th>
                    <th data-field="nome">Overall</th>
                </tr>
            </thead>
        </table>
    </div>
    <!--// .container -->

    <script src="../js/jquery-3.3.1.min.js"></script>
    <script src="../js/popper.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/draft.js"></script>
    <script>
        function listFreeAgents() {
            var auth = window.localStorage.getItem("authorization");
            $.ajax({
                type: 'GET',
                //                url: "https://draft-webservice.herokuapp.com/draft/free-agents",
                url: "https//localhost:8080/draft/free-agents",
                dataType: 'json',
                contentType: 'application/json',
                beforeSend: function(xhr) {
                    xhr.setRequestHeader("authorization", auth);
                },
                success: function(data, textStatus, xhr) {
                    $.each(data, function(i, item) {
                        $("#freeAgents").append(
                            "<tr>" +
                            "<td>" + item.nome + "</td>" +
                            "<td>" + item.pos.descricao + "</td>" +
                            "<td>" + item.overall + "</td>" +
                            "</tr>")
                    })
                },
                error: function(xhr, status, error) {
                    console.log("error: " + xhr.status);
                }
            }); //ajax
        }

    </script>
</body>

</html>
